<!DOCTTYPE html>
<html>
    include header.pug
    
    <body>
        <button id="rzp-button1">Pay</button>
        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        script.

            var order= '!{order}';
            var paymentID= '!{paymentID}';
            var options = {
                "key": paymentID, // Enter the Key ID generated from the Dashboard
                "amount": "100", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                "currency": "INR",
                "name": "Cesta Society",
                "description": "Transction for Volerant Event",
                "image": "https://example.com/your_logo",
                "order_id": order, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                "handler": function (response){
                    $(document).ready(()=>{
                        $.ajax({
                            url: '/payment',
                            data : response,
                            method: "POST",
                            success : function(data){
                                window.location.replace(data.link);
                                alert(JSON.stringify(data.message));
                            },
                            error:function(err){
                                alert(JSON.stringify(err.responseText));
                            }
                        });
                    });
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };

            var rzp1 = new Razorpay(options);
            document.getElementById('rzp-button1').onclick = function(e){
                rzp1.open();
            }
    </body>